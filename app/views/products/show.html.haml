%header
  =render partial: 'layouts/header'
  - if user_signed_in?
    %span ログイン中
    = link_to "ログアウト", destroy_user_session_path, method: :delete, class: 'btn'

.product-container
  .product-infos
    .product-infos__name
      = @product.name
      
    .product-infos__image
      %ul.image-outer.slider
        - @product.images.each do |image|
          %li= image_tag image.image.url(:product_thumb), class: 'product-image slide-itme'
        
      %ul.image-dots.thumbnail-list
        - @product.images.each do |image|
          .image-dots__dot
            = image_tag image.image.url, class: 'dot-inner thumbnail-item'

    .product-infos__price
      %span.product-infos__price__box
        = "¥#{@product.price.to_s(:delimited)}"
      %span.product-infos__price__tax
        (税込)
      %span.product-infos__price__shipping-cost
        送料込み

    %table.product-infos__details-table
      %tbody
        %tr
          %th.table-holder 出品者
          %td.table-data
            = link_to '#', class: "seller_name" do
              = @product.seller.nickname
        %tr
          %th.table-holder カテゴリー
          %td.table-data 
            = @product.category.name
        %tr
          %th.table-holder ブランド
          %td.table-data 
            - if @product.brand.presence
              = @product.brand
            - else
              %span 
                なし
        %tr
          %th.table-holder 商品の状態
          %td.table-data
            = @condition.name
        %tr
          %th.table-holder 配送料の負担
          %td.table-data
            = @shipping_cost.name
        %tr
          %th.table-holder 配送の方法
          %td.table-data らくらくカマド便
        %tr
          %th.table-holder 配送元地域
          %td.table-data
            = @prefecture.name
        %tr
          %th.table-holder 発送日の目安
          %td.table-data
            = @shipment_date.name

    - if user_signed_in? && @product.seller_id == current_user.id
    
    - else
      = link_to '#', class: "product-buy-btn" do
        購入画面に進む

    .product-infos__description
      %p.product-infos__description__inner
        = @product.description

    - if user_signed_in?
      .product-btn-container
        .product-btn-container__left
          .product-btn-container__left__favorite-function
            = render partial: 'favoriteFunction', locals: {product: @product}

          %button{type: "submit", class: 'default-btn product-report-btn'}
            %i.far.fa-flag
            %span 不適切な商品の報告

        .product-btn-container__right
          = link_to "https://www.mercari.com/jp/safe/description/", class: "product-promise-btn" do
            %i.fas.fa-lock
            %span あんしん・あんぜんへの取り組み

  - if user_signed_in? && @product.seller_id == current_user.id
    .product-change-container
      .product-change-box
        = link_to "商品の編集", edit_product_path(@product.id), class: "product-change-box__edit-btn btn-default"
        %p.product-change-box__center-text 
          or
        = link_to "この商品を削除する", product_path(@product.id), method: :delete, class: "product-change-box__delete-btn btn-default"

  - if user_signed_in?
    .product-detail-comment
      .comment-container
        .comment-container__content
          %form.comment-container__content__comment-form 
            %p.warning-message 相手のことを考え丁寧なコメントを心がけましょう。不快な言葉遣いなどは利用制限や退会処分となることがあります。
            %textarea.textarea-default
            %button.comment-submit-btn コメントする

  .product-social-media
    %ul.product-social-media__box
      %li
        %i.fab.fa-facebook-square
      %li
        %i.fab.fa-twitter
      %li
        %i.fab.fa-line
      %li
        %i.fab.fa-pinterest

%footer
  =render partial: 'layouts/footer'
